## Texas voter registration data

Combine 254 county fixed-length text files into one.  Uses SPSS syntax for now to manage size and format issues.  

Data was obtained via public records request through a consortium of media.  

count20181218042000_20190073.txt provides counts of each individual county file and the total. See tx_voter_layout.pdf for
record layout - note that it does not match exactly. Party is an included field, but not provided in public release.  

Record count: 8,409,940  

**Import data**
GET DATA  /TYPE=TXT
  /FILE="C:\JENDATAxps\accountability_data\voters\TX\Nov. 2018 general election Voting History "+
    "Data\tx_voters.txt"
  /ENCODING='Locale'
  /FIXCASE=1
  /ARRANGEMENT=FIXED
  /FIRSTCASE=1
  /IMPORTCASE=ALL
  /VARIABLES=
  /1 County_code 0-2 A3
  precinct 3-5 A4
  VUID 7-16 A10
  LASTNAME 17-66 A50
  FIRSTNAME 67-116 A50
  MIDDLENAME 117-166 A50
  FORMER_LASTNAME 167-216 A50
  SUFFIX 217-220 A4
  GENDER 221-221 A1
  DOB 222-229 F8.0
  ADDRESSNUM 230-250 A21
  ADDRESS_DIR1 251-252 A2
  ADDRESS_STREET 253-302 A50
  ADDRESS_TYPE 303-314 A12
  ADDRESS_DIR2 315-316 A2
  ADDRESS_UNIT 317-328 A12
  ADDRESS_UNIT_TYPE 329-340 A12
  CITY 341-390 A50
  ZIP 391-398 A8.0
  MAIL_ADDRESS1 399-500 A102
  MAILADDRESS2 502-559 A51
  MAILCITY 560-609 A50
  MAILSTATE 610-629 A20
  MAILZIP 630-649 A20
  REG_DATE 650-657 A8
  STATUS 658-658 A1
  HISP_SURNAME 659-659 A1
  EDATE 660-667 A8
  ETYPE 668-669 A2
  PARTY 670-672 A3
  METHOD 673-678 A6.
CACHE.
EXECUTE.
DATASET NAME DATASET1 WINDOW=FRONT.

**Remove leading spaces from city**

DATASET ACTIVATE DATASET1.
STRING  CITY_CLEAN (A50).
COMPUTE CITY_CLEAN=LTRIM(CITY).
EXECUTE.

**Remove leading spaces from ZIP**

DATASET ACTIVATE DATASET1.
STRING  ZIP_CLEAN (A8).
COMPUTE ZIP_CLEAN=LTRIM(ZIP).
EXECUTE.

**Create state field**

DATASET ACTIVATE DATASET1.
STRING  STATE (A5).
COMPUTE STATE='TX'.
EXECUTE.

**Fix bad city names**

RECODE CITY_CLEAN ('0AKVILLE'='OAKVILLE') ('FALFURRIAS TX'='FALFURRIAS') ('LAUGHLIN A F B'='LAUGHLIN AFB')  ('LAUGHIN AFB'='LAUGHLIN AFB') ('LEVELLAND, TX'='LEVELLAND') ('LA PRYOR,TX'='LA PRYOR') ('RICHLAND SPRNGS'='RICHLAND SPRINGS') ('RICHLAND SPGS'='RICHLAND SPRINGS').
EXECUTE.

**Fix problem ZIPs**

RECODE ZIP_CLEAN ('75691069'='95691') ('75972910'='75972') ('7511'='77511') ('7832'='78132') ('7584'='77584') ('7578'='77578') ('7566'='77566') ('7628'='76028') ('7480'='77480') ('7351'='77351') ('7'='78840') ('130'='78130') ('143'='76008') ('405'='77515') ('759'='75901') ('2078'='77802') ('3610'='77578') ('6808'='77584') ('7736'='77360') ('7781'='77581') ('7515'='77515') ('7583'='77583')
('7911'='79111') ('7541'='77541') ('7780'='77480') ('7751'='77511') ('7594'='77594') ('7807'='78070').     
EXECUTE.


**Check ZIP lengths**

COMPUTE ZIP_LENGTH=CHAR.LENGTH(ZIP_CLEAN).
EXECUTE.

**export as csv**

SAVE TRANSLATE OUTFILE='C:\JENDATAxps\accountability_data\voters\TX\tx_voters_out.csv'
  /TYPE=CSV
  /ENCODING='UTF8'
  /MAP
  /REPLACE
  /FIELDNAMES
 /RENAME CITY_CLEAN=RES_CITY ZIP_CLEAN=ZIP5
  /CELLS=VALUES
  /DROP=CITY ZIP ZIP_LENGTH.
